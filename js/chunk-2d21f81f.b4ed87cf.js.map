{"version":3,"sources":["webpack:///./src/views/NewPassword.vue?aa3f","webpack:///src/views/NewPassword.vue","webpack:///./src/views/NewPassword.vue?df74","webpack:///./src/views/NewPassword.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","newPassword","directives","name","rawName","value","state","expression","attrs","_v","newPasswordForm","class","newPasswordPasswordError","domProps","newPasswordPasswordLengthCheck","target","composing","$set","_s","newPasswordPasswordErrorText","newPasswordCheckPasswordError","newPasswordCheckPasswordSameCheck","newPasswordCheckPasswordErrorText","_m","newPasswordFailText","_e","staticRenderFns","props","data","newPasswordPassword","newPasswordCheckPassword","methods","axios","length","component"],"mappings":"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","file":"js/chunk-2d21f81f.b4ed87cf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.newPassword()}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state != 'success'),expression:\"state != 'success'\"}]},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"newPassword\"}},[_vm._v(\"設定新密碼：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPasswordForm.newPasswordPassword),expression:\"newPasswordForm.newPasswordPassword\"}],staticClass:\"form-control\",class:_vm.newPasswordForm.newPasswordPasswordError ? 'is-invalid' : '',attrs:{\"type\":\"password\",\"id\":\"newPassword\"},domProps:{\"value\":(_vm.newPasswordForm.newPasswordPassword)},on:{\"keyup\":function($event){return _vm.newPasswordPasswordLengthCheck()},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newPasswordForm, \"newPasswordPassword\", $event.target.value)}}}),_c('div',{staticClass:\"invalid-feedback\"},[_vm._v(\" \"+_vm._s(_vm.newPasswordForm.newPasswordPasswordErrorText)+\" \")])]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"newCheckPassword\"}},[_vm._v(\"確認新密碼：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPasswordForm.newPasswordCheckPassword),expression:\"newPasswordForm.newPasswordCheckPassword\"}],staticClass:\"form-control\",class:_vm.newPasswordForm.newPasswordCheckPasswordError\n                  ? 'is-invalid'\n                  : '',attrs:{\"type\":\"password\",\"id\":\"newCheckPassword\"},domProps:{\"value\":(_vm.newPasswordForm.newPasswordCheckPassword)},on:{\"keyup\":function($event){return _vm.newPasswordCheckPasswordSameCheck()},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.newPasswordForm, \"newPasswordCheckPassword\", $event.target.value)}}}),_c('div',{staticClass:\"invalid-feedback\"},[_vm._v(\" \"+_vm._s(_vm.newPasswordForm.newPasswordCheckPasswordErrorText)+\" \")])])]),_c('div',{staticClass:\"form-group\"},[(_vm.state === 'init')?_c('div',[_c('button',{staticClass:\"btn btn-primary float-right\",attrs:{\"type\":\"submit\"}},[_vm._v(\" 確認 \")])]):(_vm.state === 'loading')?_c('div',[_vm._m(0)]):(_vm.state === 'fail')?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_c('p',{staticClass:\"text-center my-2 py-2\"},[_c('span',[_vm._v(_vm._s(_vm.newPasswordFailText))])])]):(_vm.state === 'success')?_c('div',{staticClass:\"alert alert-info\",attrs:{\"role\":\"alert\"}},[_vm._m(1)]):_vm._e()])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spinner-border text-secondary float-right\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"text-center my-2 py-2\"},[_c('span',[_vm._v(\"密碼更新成功 請重新登入嘗試 將在5秒後自動跳轉至首頁\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <form @submit.prevent=\"newPassword()\">\n          <div v-show=\"state != 'success'\">\n            <div class=\"form-group\">\n              <label for=\"newPassword\">設定新密碼：</label>\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                :class=\"\n                  newPasswordForm.newPasswordPasswordError ? 'is-invalid' : ''\n                \"\n                id=\"newPassword\"\n                v-model=\"newPasswordForm.newPasswordPassword\"\n                @keyup=\"newPasswordPasswordLengthCheck()\"\n              />\n              <div class=\"invalid-feedback\">\n                {{ newPasswordForm.newPasswordPasswordErrorText }}\n              </div>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"newCheckPassword\">確認新密碼：</label>\n              <input\n                type=\"password\"\n                class=\"form-control\"\n                :class=\"\n                  newPasswordForm.newPasswordCheckPasswordError\n                    ? 'is-invalid'\n                    : ''\n                \"\n                id=\"newCheckPassword\"\n                v-model=\"newPasswordForm.newPasswordCheckPassword\"\n                @keyup=\"newPasswordCheckPasswordSameCheck()\"\n              />\n              <div class=\"invalid-feedback\">\n                {{ newPasswordForm.newPasswordCheckPasswordErrorText }}\n              </div>\n            </div>\n          </div>\n          <div class=\"form-group\">\n            <div v-if=\"state === 'init'\">\n              <button type=\"submit\" class=\"btn btn-primary float-right\">\n                確認\n              </button>\n            </div>\n            <div v-else-if=\"state === 'loading'\">\n              <div\n                class=\"spinner-border text-secondary float-right\"\n                role=\"status\"\n              >\n                <span class=\"sr-only\">Loading...</span>\n              </div>\n            </div>\n            <div\n              v-else-if=\"state === 'fail'\"\n              class=\"alert alert-danger\"\n              role=\"alert\"\n            >\n              <p class=\"text-center my-2 py-2\">\n                <span>{{ newPasswordFailText }}</span>\n              </p>\n            </div>\n            <div\n              v-else-if=\"state === 'success'\"\n              class=\"alert alert-info\"\n              role=\"alert\"\n            >\n              <p class=\"text-center my-2 py-2\">\n                <span>密碼更新成功 請重新登入嘗試 將在5秒後自動跳轉至首頁</span>\n              </p>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"NewPassword\",\n  props: [\"forgetPassword_token\"],\n  data() {\n    return {\n      state: \"init\",\n      newPasswordForm: {\n        newPasswordPassword: \"\",\n        newPasswordPasswordError: false,\n        newPasswordPasswordErrorText: \"\",\n        newPasswordCheckPassword: \"\",\n        newPasswordCheckPasswordError: false,\n        newPasswordCheckPasswordErrorText: \"\",\n      },\n      newPasswordFailText: \"\",\n    };\n  },\n  methods: {\n    newPassword() {\n      let vm = this;\n      this.newPasswordPasswordLengthCheck();\n      this.newPasswordCheckPasswordSameCheck();\n      if (\n        !(\n          this.newPasswordForm.newPasswordPasswordError ||\n          this.newPasswordForm.newPasswordCheckPasswordError\n        )\n      ) {\n        this.state = \"loading\";\n        this.axios\n          .post(process.env.VUE_APP_ROOT_API + \"/api/user/newPassword\", {\n            token: this.forgetPassword_token,\n            password: this.newPasswordForm.newPasswordPassword,\n          })\n          .then(() => {\n            this.newPasswordForm.newPasswordPassword = \"\";\n            this.newPasswordForm.newPasswordCheckPassword = \"\";\n            this.state = \"success\";\n            setTimeout(() => {\n              this.$router.push({ path: \"/\" });\n            }, 5000);\n          })\n          .catch(function (error) {\n            console.log(error);\n            vm.newPasswordForm.newPasswordPassword = \"\";\n            vm.newPasswordForm.newPasswordCheckPassword = \"\";\n            vm.state = \"fail\";\n            if (error.response.data === \"tokenExpired\") {\n              vm.newPasswordFailText = \"驗證已過期 請重新嘗試\";\n            } else if (error.response.data === \"tokenInvalid\") {\n              vm.newPasswordFailText = \"驗證錯誤 請重新嘗試\";\n            } else {\n              vm.newPasswordFailText = \"發生未預期的錯誤 請重新嘗試\";\n            }\n          });\n      }\n    },\n    newPasswordPasswordLengthCheck() {\n      if (this.newPasswordForm.newPasswordPassword.length == 0) {\n        this.newPasswordForm.newPasswordPasswordError = true;\n        this.newPasswordForm.newPasswordPasswordErrorText = \"密碼輸入為空\";\n      } else if (this.newPasswordForm.newPasswordPassword.length < 8) {\n        this.newPasswordForm.newPasswordPasswordError = true;\n        this.newPasswordForm.newPasswordPasswordErrorText =\n          \"密碼過短。密碼長度請 >= 8\";\n      } else {\n        this.newPasswordForm.newPasswordPasswordError = false;\n        this.newPasswordForm.newPasswordPasswordErrorText = \"\";\n      }\n    },\n    newPasswordCheckPasswordSameCheck() {\n      if (\n        this.newPasswordForm.newPasswordPassword !=\n        this.newPasswordForm.newPasswordCheckPassword\n      ) {\n        this.newPasswordForm.newPasswordCheckPasswordError = true;\n        this.newPasswordForm.newPasswordCheckPasswordErrorText = \"密碼不相符\";\n      } else {\n        this.newPasswordForm.newPasswordCheckPasswordError = false;\n        this.newPasswordForm.newPasswordCheckPasswordErrorText = \"\";\n      }\n    },\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewPassword.vue?vue&type=template&id=7786c144&\"\nimport script from \"./NewPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./NewPassword.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
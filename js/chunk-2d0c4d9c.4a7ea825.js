(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4d9c"],{"3d1f":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"container"},[a("div",{staticClass:"my-1"},["Loading"===t.highlightPage?a("div",{staticClass:"d-flex justify-content-center my-4"},[t._m(0)]):"Find"===t.highlightPage?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},["FINISHED"===t.highlightVideo.status?a("div",{staticClass:"embed-responsive embed-responsive-16by9"},[a("iframe",{staticClass:"embed-responsive-item",attrs:{src:t.embed_link,allowfullscreen:"true"}})]):a("div",{staticClass:"alert alert-info",class:[t.isFailed?"alert-danger":"alert-info"],attrs:{role:"alert"}},[a("p",{staticClass:"text-center my-4 py-4"},[a("span",[t._v(t._s(t.highlightStatusText))])])])]),a("div",{staticClass:"col-12 mt-4"},[a("h4",[t._v(" "+t._s(t.highlightVideo.memo)+" ")]),a("small",[t._v("分析狀態："+t._s(t.highlightStatusText))]),a("a",{staticClass:"card-link float-right",attrs:{href:"https://www.twitch.tv/videos/"+t.highlightVideo.vod_id,target:"_blank"}},[a("i",{staticClass:"fas fa-link fa-lg my-3",attrs:{"data-toggle":"tooltip",title:"VOD網址"}})])]),a("div",{staticClass:"col-12"},[a("p",{staticClass:"text-left m-0"},[t._v(" 實況主： "),a("b-link",{attrs:{to:"/results?channel_id="+t.highlightVideo.channel_id}},[t._v(t._s(t.highlightVideo.streamerName))])],1),a("p",{staticClass:"text-left m-0"},[t._v(" 遊戲分類： "),a("b-link",{attrs:{to:"/results?game="+t.highlightVideo.game}},[t._v(t._s(t.highlightVideo.game))])],1),a("p",{staticClass:"text-left m-0"},[t._v(" 目前分數："+t._s(t.highlightVideo.avg_score)+" ")]),a("p",{staticClass:"text-left m-0"},[t._v(" 建立者："),a("b-link",{attrs:{to:"/results?author="+t.highlightVideo.author}},[t._v(t._s(t.highlightVideo.author))])],1),a("p",{staticClass:"text-left m-0"},[t._v("分析方式："+t._s(t.analysis))]),a("b-button",{staticClass:"float-right m-1",attrs:{variant:"outline-info"},on:{click:function(i){t.appraiseModalShow=!t.appraiseModalShow}}},[t._v("我要評價")]),a("b-modal",{attrs:{title:"精華評價","hide-footer":""},model:{value:t.appraiseModalShow,callback:function(i){t.appraiseModalShow=i},expression:"appraiseModalShow"}},[a("form",{on:{submit:function(i){return i.preventDefault(),t.appraise(i)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"validationText"}},[t._v("評論：")]),a("br"),a("button",{staticClass:"btn m-1",class:t.notAccurate?"btn-secondary":"btn-outline-secondary",attrs:{type:"button"},on:{click:function(i){return t.textButton("notAccurate")}}},[t._v(" 影片不精準 ")]),a("button",{staticClass:"btn m-1",class:t.videoLong?"btn-secondary":"btn-outline-secondary",attrs:{type:"button"},on:{click:function(i){return t.textButton("videoLong")}}},[t._v(" 影片長度過長 ")]),a("button",{staticClass:"btn m-1",class:t.analysisLong?"btn-secondary":"btn-outline-secondary",attrs:{type:"button"},on:{click:function(i){return t.textButton("analysisLong")}}},[t._v(" 影片分析太久 ")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"form-control",class:t.validationText?"is-invalid":"",attrs:{type:"text",id:"validationText",maxlength:"50"},domProps:{value:t.text},on:{change:t.checkText,keyup:t.checkText,input:function(i){i.target.composing||(t.text=i.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v("評論不得為空")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"starRating"}},[t._v("分數：")]),a("br"),t._l(5,(function(i){return[i<=t.starRating?a("i",{key:i.id,staticClass:"text-warning fas fa-star",on:{click:function(a){return t.clickRating(i)},mouseover:function(a){return t.mouseOverRrating(i)},touchstart:function(a){return t.mouseOverRrating(i)},mouseout:t.mouseOutRrating,touchend:t.mouseOutRrating}}):a("i",{key:i.id,staticClass:"text-warning far fa-star",on:{click:function(a){return t.clickRating(i)},mouseover:function(a){return t.mouseOverRrating(i)},touchstart:function(a){return t.mouseOverRrating(i)},mouseout:t.mouseOutRrating,touchend:t.mouseOutRrating}})]})),t._v(" "+t._s(t.starRating)+" ")],2),a("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"}},[t._v(" 送出 ")])])])],1)])]):a("div",{staticClass:"row justify-content-center my-2"},[t._m(1)])])])},s=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])])},function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("p",{staticClass:"text-center my-2 py-2"},[a("span",[t._v("很抱歉！找不到您的精華影片！")])])])}],n=(a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("ddb0"),a("2b3d"),{name:"Highlight",props:["highlight_id"],data:function(){return{highlightPage:"Loading",highlightVideo:null,analysisComplete:!1,temp_starRating:4,starRating:4,text:"",appraiseModalShow:!1,notAccurate:!1,videoLong:!1,analysisLong:!1,validationText:!1,fetchContent:""}},mounted:function(){var t=this;this.highlightPage="Loading",this.getContent(),this.fetchContent=setInterval((function(){t.getContent()}),6e4)},methods:{getContent:function(){var t=this,i=this;this.axios.get("https://api.clipfetcher.com/api/vod/highlight",{params:{highlight_id:this.highlight_id}}).then((function(i){t.highlightVideo=i.data[0],(t.isFailed||"FINISHED"===t.highlightVideo.status)&&clearInterval(t.fetchContent),""==t.highlightVideo||null==t.highlightVideo?(t.highlightPage="Error",clearInterval(t.fetchContent)):t.highlightPage="Find"})).catch((function(){i.highlightPage="Error",clearInterval(t.fetchContent)}))},mouseOverRrating:function(t){this.temp_starRating=this.starRating,this.starRating=t},mouseOutRrating:function(){this.isRating?this.starRating=this.temp_starRating:this.starRating=4,this.temp_starRating=0},clickRating:function(t){this.starRating=this.temp_starRating=t,this.isRating=!0},textButton:function(t){var i="";"notAccurate"==t?this.notAccurate=!this.notAccurate:"videoLong"==t?this.videoLong=!this.videoLong:"analysisLong"==t&&(this.analysisLong=!this.analysisLong),this.notAccurate&&(i+=" 影片不精準 "),this.videoLong&&(i+=" 影片長度過長 "),this.analysisLong&&(i+=" 影片分析太久 "),this.text=i},checkText:function(){""==this.text||null==this.text?this.validationText=!0:this.validationText=!1},appraise:function(){var t=this;""==this.text||null==this.text?this.validationText=!0:(this.validationText=!1,this.axios.post("https://api.clipfetcher.com/api/vod/appraise",{highlight_id:this.highlight_id,text:this.text,score:this.starRating}).then((function(i){t.response=i})).catch((function(t){console.log(t)})),this.appraiseModalShow=!this.appraiseModalShow)}},watch:{$route:function(){this.getContent()}},computed:{embed_link:function(){var t=this.highlightVideo.youtube_url,i=new URL(t).hostname,a="";return"www.youtube.com"===i?(t=t.split("="),a=t[1],"https://www.youtube.com/embed/"+a+"?rel=0"):(t=t.split("?"),t=t[0],t=t.split("/"),a=t[t.length-1],"https://iframe.videodelivery.net/"+a)},highlightStatusText:function(){var t;if(this.highlightVideo.status)switch(this.highlightVideo.status){case"GETINFO":t="獲取資訊中";break;case"RUNALGO":t="影片分析中";break;case"FMVODDL":t="影片下載中";break;case"FMVODCB":t="影片合併中";break;case"YTVODUL":t="YT上傳中";break;case"FINISHED":t="已完成";break;case"NEWANALF":t="建立分析失敗";break;case"GETINFOF":t="獲取資訊失敗";break;case"RUNALGOF":t="影片分析失敗";break;case"FMVODDLF":t="影片下載失敗";break;case"FMVODCBF":t="影片合併失敗";break;case"YTVODULF":t="YT上傳失敗";break;default:t="獲取資訊中"}return t},isFailed:function(){var t=!1;if(this.highlightVideo.status)switch(this.highlightVideo.status){case"GETINFO":t=!1;break;case"RUNALGO":t=!1;break;case"FMVODDL":t=!1;break;case"FMVODCB":t=!1;break;case"YTVODUL":t=!1;break;case"FINISHED":t=!1;break;case"NEWANALF":t=!0;break;case"GETINFOF":t=!0;break;case"RUNALGOF":t=!0;break;case"FMVODDLF":t=!0;break;case"FMVODCBF":t=!0;break;case"YTVODULF":t=!0;break;default:t=!1}return t},analysis:function(){var t;switch(this.highlightVideo.analyzeType){case"freq":t="自動頻率分析";break;case"manual":t="手動剪輯";break;case"machine":t="機器學習";break;default:t=""}return t}}}),o=n,r=a("2877"),l=Object(r["a"])(o,e,s,!1,null,null,null);i["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0c4d9c.4a7ea825.js.map